---
const services = [
  "Individuelle Software",
  "Shopify Entwicklung",
  "Landing Pages",
  "Marketing Tools",
  "Websites",
  "Sonstiges"
];
---

<section id="contact" class="contact">
  <div class="contact-container">
    <!-- Header -->
    <header class="contact-header">
      <div class="header-left">
        <div class="info-label">
          <span class="label-number">08</span>
          <span class="label-text">Kontakt</span>
        </div>
        <h2 class="contact-title">
          Lass uns etwas<br />
          <span class="title-accent">Großartiges bauen</span>
        </h2>
      </div>
      <div class="header-right">
        <p class="contact-description">
          Hast du ein Projekt im Sinn? Wähle, wie du dich verbinden möchtest.
        </p>
      </div>
    </header>

    <!-- Two Options Grid -->
    <div class="contact-options">
      <!-- Option 1: Book a Call - Calendly Embed -->
      <div class="contact-card card-calendly">
        <div class="card-badge">Empfohlen</div>
        <h3 class="card-title">Discovery Call buchen</h3>
        <p class="card-description">
          30-minütiges Gespräch, um dein Projekt zu besprechen. Wähle eine Zeit, die dir passt.
        </p>
        <div class="meeting-details">
          <h4 class="meeting-title">Was wir besprechen:</h4>
          <ul class="meeting-agenda">
            <li>Deine aktuellen Herausforderungen und Ziele</li>
            <li>Wie ich bei deinem Projekt helfen kann</li>
            <li>Ob wir gut zusammenpassen</li>
            <li>Nächste Schritte und möglicher Projektumfang</li>
          </ul>
        </div>
        <!-- Calendly inline widget -->
        <div class="calendly-inline-widget" data-url="https://calendly.com/fabian-eppinger/30min?hide_gdpr_banner=1&primary_color=00ff9c" style="min-width:100%;height:700px;"></div>
      </div>

      <!-- Option 2: Send a Message -->
      <div class="contact-card card-form">
        <div class="card-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
        </div>
        <h3 class="card-title">Nachricht senden</h3>
        <p class="card-description">
          Hast du eine Frage oder möchtest zuerst Projektdetails teilen? Schreib mir eine Nachricht.
        </p>

        <form id="contact-form" class="mini-form">
          <div class="form-row">
            <input type="text" name="name" required placeholder="Dein Name" class="form-input" />
            <input type="email" name="email" required placeholder="E-Mail Adresse" class="form-input" />
          </div>

          <div class="form-group">
            <label class="form-label">Was brauchst du?</label>
            <div class="services-grid">
              {services.map((service) => (
                <label class="service-option">
                  <input type="checkbox" name="services" value={service} class="service-input" />
                  <span class="service-label">{service}</span>
                </label>
              ))}
            </div>
          </div>

          <textarea name="message" rows="3" class="form-textarea" placeholder="Erzähl mir von deinem Projekt..."></textarea>

          <button type="submit" class="card-cta cta-secondary">
            Nachricht senden
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M3 8H13M13 8L8 3M13 8L8 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </form>
      </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-item">
        <span class="status-dot status-green"></span>
        <span class="status-text">Aktuell neue Kunden annehmend</span>
      </div>
      <div class="status-item">
        <span class="status-dot status-lime"></span>
        <span class="status-text">Typische Antwort innerhalb von 24 Stunden</span>
      </div>
      <div class="status-item">
        <span class="status-text">Oder direkt per E-Mail:</span>
        <a href="mailto:fabian.eppinger@icloud.com" class="status-link">fabian.eppinger@icloud.com</a>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer">
  <div class="footer-container">
    <!-- Top: CTA -->
    <div class="footer-cta">
      <h2 class="cta-title">
        Hast du ein Projekt im Sinn?
        <a href="#contact" class="cta-link">Lass uns reden</a>
      </h2>
    </div>

    <!-- Middle: Links Grid -->
    <div class="footer-grid">
      <div class="footer-col">
        <h3 class="col-title">Navigation</h3>
        <ul class="col-list">
          <li><a href="#portfolio">Projekte</a></li>
          <li><a href="#services">Leistungen</a></li>
          <li><a href="#about">Über mich</a></li>
          <li><a href="#contact">Kontakt</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h3 class="col-title">Leistungen</h3>
        <ul class="col-list">
          <li>Individuelle Software</li>
          <li>Shopify Entwicklung</li>
          <li>Landing Pages</li>
          <li>Marketing Tools</li>
        </ul>
      </div>

      <div class="footer-col">
        <h3 class="col-title">Standort</h3>
        <p class="col-text">
          Remote-first<br />
          Europa Zeitzone<br />
          Deutschland
        </p>
      </div>

      <div class="footer-col">
        <h3 class="col-title">Verbinden</h3>
        <ul class="col-list">
          <li><a href="https://www.linkedin.com/in/fabian-eppinger-756142ab/" target="_blank" rel="noopener">LinkedIn</a></li>
          <li><a href="mailto:fabian.eppinger@icloud.com">E-Mail</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h3 class="col-title">Rechtliches</h3>
        <ul class="col-list">
          <li><a href="/de/impressum">Impressum</a></li>
          <li><a href="/de/datenschutz">Datenschutz</a></li>
        </ul>
      </div>
    </div>

    <!-- Bottom: Copyright -->
    <div class="footer-bottom">
      <p class="copyright">
        &copy; {new Date().getFullYear()} Fabian Eppinger
      </p>
    </div>
  </div>
</footer>

<!-- Calendly embed script -->
<script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const serviceInputs = document.querySelectorAll('.service-input');
    serviceInputs.forEach(input => {
      input.addEventListener('change', function() {
        this.nextElementSibling?.classList.toggle('selected', this.checked);
      });
    });

    const form = document.getElementById('contact-form');
    form?.addEventListener('submit', (e) => {
      e.preventDefault();

      const formData = new FormData(form);
      const selectedServices: string[] = [];
      serviceInputs.forEach(input => {
        if ((input as HTMLInputElement).checked) {
          selectedServices.push((input as HTMLInputElement).value);
        }
      });

      const subject = `Neue Projektanfrage von ${formData.get('name')}`;
      const body = `Name: ${formData.get('name')}
E-Mail: ${formData.get('email')}
Leistungen: ${selectedServices.join(', ')}

Projektdetails:
${formData.get('message')}`;

      window.location.href = `mailto:fabian.eppinger@icloud.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    });
  });
</script>

<style>
  .contact {
    background: #0c0c0c;
    padding: clamp(5rem, 12vw, 10rem) 0;
    position: relative;
  }

  .contact-container {
    max-width: 1800px;
    margin: 0 auto;
    padding: 0 clamp(1.5rem, 5vw, 4rem);
  }

  .contact-header {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: clamp(2rem, 5vw, 4rem);
    align-items: end;
    margin-bottom: clamp(4rem, 8vw, 6rem);
    padding-bottom: clamp(2rem, 4vw, 3rem);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .info-label {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .label-number {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: #a7a9ac;
    letter-spacing: 0.05em;
  }

  .label-text {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: #ffffff;
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }

  .contact-title {
    font-family: var(--font-display);
    font-size: clamp(2.5rem, 6vw, 5rem);
    font-weight: 700;
    color: #ffffff;
    line-height: 1.05;
    letter-spacing: -0.03em;
  }

  .title-accent { color: var(--color-accent); }

  .contact-description {
    font-family: var(--font-body);
    font-size: clamp(1rem, 1.25vw, 1.125rem);
    line-height: 1.7;
    color: #a7a9ac;
    max-width: 400px;
    margin-left: auto;
    margin-bottom: 0;
  }

  .contact-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: clamp(1.5rem, 3vw, 2rem);
    margin-bottom: clamp(3rem, 6vw, 4rem);
  }

  .contact-card {
    background: #ffffff;
    padding: clamp(2rem, 4vw, 3rem);
    border-radius: 12px;
    position: relative;
  }

  .card-badge {
    position: absolute;
    top: -12px;
    left: clamp(2rem, 4vw, 3rem);
    background: var(--color-accent);
    color: #0c0c0c;
    padding: 0.375rem 1rem;
    font-family: var(--font-mono);
    font-size: 0.6875rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    border-radius: 100px;
  }

  .card-calendly { padding-bottom: 1rem; }
  .card-calendly .card-title { margin-bottom: 0.5rem; }
  .card-calendly .card-description { margin-bottom: 1rem; }

  .calendly-inline-widget {
    border-radius: 8px;
    overflow: hidden;
  }

  .meeting-details {
    background: #f7f7f7;
    border-radius: 8px;
    padding: 1.25rem 1.5rem;
    margin-bottom: 1.5rem;
  }

  .meeting-title {
    font-family: var(--font-display);
    font-size: 0.9375rem;
    font-weight: 600;
    color: #0c0c0c;
    margin: 0 0 0.75rem 0;
  }

  .meeting-agenda {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .meeting-agenda li {
    font-family: var(--font-body);
    font-size: 0.875rem;
    color: #666;
    padding-left: 1.25rem;
    position: relative;
  }

  .meeting-agenda li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.5em;
    width: 5px;
    height: 5px;
    background: var(--color-accent);
    border-radius: 50%;
  }

  .card-icon {
    width: 56px;
    height: 56px;
    background: #f7f7f7;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1.5rem;
    color: #0c0c0c;
  }

  .card-title {
    font-family: var(--font-display);
    font-size: clamp(1.5rem, 2.5vw, 2rem);
    font-weight: 700;
    color: #0c0c0c;
    margin-bottom: 0.75rem;
    letter-spacing: -0.02em;
  }

  .card-description {
    font-family: var(--font-body);
    font-size: 1rem;
    line-height: 1.6;
    color: #666;
    margin-bottom: 1.5rem;
  }

  .card-cta {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    width: 100%;
    padding: 1.125rem 2rem;
    border: none;
    border-radius: 100px;
    font-family: var(--font-display);
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.4s var(--ease-out-quart);
  }

  .cta-secondary {
    background: #f7f7f7;
    color: #0c0c0c;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .cta-secondary:hover {
    background: #0c0c0c;
    color: #ffffff;
    border-color: #0c0c0c;
  }

  .card-cta svg { transition: transform 0.3s var(--ease-out-quart); }
  .card-cta:hover svg { transform: translateX(4px); }

  .mini-form {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .form-label {
    font-family: var(--font-mono);
    font-size: 0.6875rem;
    font-weight: 500;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: #666;
  }

  .form-input,
  .form-textarea {
    width: 100%;
    padding: 0.875rem 1rem;
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    background: #f7f7f7;
    font-family: var(--font-body);
    font-size: 0.9375rem;
    color: #0c0c0c;
    outline: none;
    transition: all 0.3s var(--ease-out-quart);
  }

  .form-input:focus,
  .form-textarea:focus {
    border-color: var(--color-accent);
    background: #ffffff;
  }

  .form-textarea {
    resize: none;
    line-height: 1.5;
  }

  .form-input::placeholder,
  .form-textarea::placeholder { color: #a7a9ac; }

  .services-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .service-option { cursor: pointer; }
  .service-input { display: none; }

  .service-label {
    display: block;
    padding: 0.5rem 0.875rem;
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 100px;
    font-family: var(--font-body);
    font-size: 0.8125rem;
    color: #666;
    transition: all 0.3s var(--ease-out-quart);
  }

  .service-label:hover {
    border-color: #0c0c0c;
    color: #0c0c0c;
  }

  .service-label.selected {
    background: var(--color-accent);
    border-color: var(--color-accent);
    color: #0c0c0c;
  }

  .status-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: clamp(2rem, 4vw, 3rem);
    padding: 1.5rem 0;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  .status-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }

  .status-green { background: #22C55E; }
  .status-lime { background: var(--color-accent); }

  .status-text {
    font-family: var(--font-body);
    font-size: 0.875rem;
    color: #a7a9ac;
  }

  .status-link {
    font-family: var(--font-body);
    font-size: 0.875rem;
    color: #ffffff;
    text-decoration: none;
    transition: color 0.3s var(--ease-out-quart);
  }

  .status-link:hover { color: var(--color-accent); }

  .footer {
    background: #ffffff;
    padding: clamp(4rem, 8vw, 6rem) 0 clamp(2rem, 4vw, 3rem);
  }

  .footer-container {
    max-width: 1800px;
    margin: 0 auto;
    padding: 0 clamp(1.5rem, 5vw, 4rem);
  }

  .footer-cta {
    margin-bottom: clamp(4rem, 8vw, 6rem);
    padding-bottom: clamp(3rem, 6vw, 5rem);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .cta-title {
    font-family: var(--font-display);
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 700;
    color: #0c0c0c;
    line-height: 1.2;
    letter-spacing: -0.03em;
  }

  .cta-link {
    color: #0c0c0c;
    text-decoration: none;
    position: relative;
    transition: color 0.3s var(--ease-out-quart);
    white-space: nowrap;
  }

  .cta-link::after { content: ' →'; }

  .cta-link::before {
    content: '';
    position: absolute;
    bottom: 0.1em;
    left: 0;
    right: 0;
    height: 0.3em;
    background: var(--color-accent);
    z-index: -1;
    transform: skewX(-3deg);
    transition: background 0.3s var(--ease-out-quart);
  }

  .footer-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: clamp(2rem, 4vw, 4rem);
    margin-bottom: clamp(3rem, 6vw, 5rem);
    padding-bottom: clamp(2rem, 4vw, 3rem);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .col-title {
    font-family: var(--font-mono);
    font-size: 0.6875rem;
    font-weight: 500;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: #a7a9ac;
    margin-bottom: 1.5rem;
  }

  .col-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .col-list li {
    font-family: var(--font-body);
    font-size: 0.9375rem;
    color: #a7a9ac;
  }

  .col-list a {
    color: #0c0c0c;
    text-decoration: none;
    transition: color 0.3s var(--ease-out-quart);
  }

  .col-list a:hover { color: #a7a9ac; }

  .col-text {
    font-family: var(--font-body);
    font-size: 0.9375rem;
    line-height: 1.8;
    color: #a7a9ac;
    margin: 0;
  }

  .footer-bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .copyright,
  .tagline {
    font-family: var(--font-body);
    font-size: 0.875rem;
    color: #a7a9ac;
    margin: 0;
  }

  @media (max-width: 1024px) {
    .contact-header { grid-template-columns: 1fr; }
    .contact-description { margin-left: 0; max-width: 500px; }
    .contact-options { grid-template-columns: 1fr; }
    .footer-grid { grid-template-columns: repeat(2, 1fr); }
  }

  @media (max-width: 768px) {
    .form-row { grid-template-columns: 1fr; }
    .status-bar { flex-direction: column; gap: 1rem; }
    .footer-grid { grid-template-columns: 1fr; gap: 2rem; }
    .footer-bottom { flex-direction: column; gap: 0.5rem; text-align: center; }
  }
</style>
